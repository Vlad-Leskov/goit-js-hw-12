{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(searchQuery, currentPage) {\n  const url = 'https://pixabay.com/api/';\n\n  const params = {\n    key: '43042751-379763e2b45d181b55d7040e4',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  try {\n    const response = await axios.get(url, { params });\n\n    if (response.status !== 200) {\n      throw new Error('Unable to fetch images');\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw new Error('Unable to fetch images');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const galleryMarkup = images\n    .map(image => {\n      return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            width=\"1280\"\n            height=\"152\"\n            src=\"${image.webformatURL}\"\n            data-source=\"${image.largeImageURL}\"\n            alt=\"${image.tags}\"\n          />\n          <ul class=\"gallery-description\">\n          <li><h3>Likes</h3><p>${image.likes}</p>\n          </li>\n          <li><h3>Views</h3><p>${image.views}</p>\n            </li>\n            <li><h3>Comments</h3><p>${image.comments}</p>\n              </li>\n              <li><h3>Downloads</h3><p>${image.downloads}</p>\n                </li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n  lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n\nexport { renderImages };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more-btn');\n\nlet searchQuery;\nlet currentPage = 1;\nlet maxPage = 0;\nconst per_page = 15;\n\nfunction showLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nform.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  searchQuery = input.value.trim();\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (!searchQuery) {\n    hideLoadMore();\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await fetchImages(searchQuery, currentPage);\n    maxPage = Math.ceil(data.totalHits / per_page);\n    renderImages(data.hits);\n  } catch (err) {\n    console.log(err);\n  }\n\n  hideLoader();\n  checkBtnStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await fetchImages(searchQuery, currentPage);\n    renderImages(data.hits);\n  } catch (err) {\n    console.log(err);\n  }\n\n  scrollBy({\n    top: 950,\n    behavior: 'smooth',\n  });\n  checkBtnStatus();\n  hideLoader();\n}\n"],"names":["fetchImages","searchQuery","currentPage","url","params","response","axios","error","renderImages","images","gallery","galleryMarkup","image","lightbox","SimpleLightbox","form","input","loader","btnLoadMore","maxPage","per_page","showLoadMore","hideLoadMore","showLoader","hideLoader","checkBtnStatus","iziToast","onFormSubmit","onLoadMoreClick","e","data","err"],"mappings":"owBAEO,eAAeA,EAAYC,EAAaC,EAAa,CAC1D,MAAMC,EAAM,2BAENC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EAEE,GAAI,CACF,MAAMG,EAAW,MAAMC,EAAM,IAAIH,EAAK,CAAE,OAAAC,CAAM,CAAE,EAEhD,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,wBAAwB,EAG1C,OAAOA,EAAS,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAMA,CAAK,EACb,IAAI,MAAM,wBAAwB,CACzC,CACH,CCvBA,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgBF,EACnB,IAAIG,GACI;AAAA,wCAC2BA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKxCA,EAAM,YAAY;AAAA,2BACVA,EAAM,aAAa;AAAA,mBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA,iCAGIA,EAAM,KAAK;AAAA;AAAA,iCAEXA,EAAM,KAAK;AAAA;AAAA,sCAENA,EAAM,QAAQ;AAAA;AAAA,yCAEXA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,YAKnD,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAa,EACrDE,EAAS,QAAO,CAClB,CAEA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,KAAK,CAAE,EC/BnEC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAS,SAAS,eAAe,QAAQ,EACzCP,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIjB,EACAC,EAAc,EACdiB,EAAU,EACd,MAAMC,EAAW,GAEjB,SAASC,GAAe,CACtBH,EAAY,UAAU,OAAO,QAAQ,CACvC,CACA,SAASI,GAAe,CACtBJ,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASK,GAAa,CACpBN,EAAO,UAAU,OAAO,QAAQ,CAClC,CACA,SAASO,GAAa,CACpBP,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,SAASQ,GAAiB,CACpBvB,GAAeiB,GACjBG,IACAI,EAAS,KAAK,CACZ,MAAO,OACP,SAAU,WACV,QAAS,4DACf,CAAK,GAEDL,GAEJ,CAEAN,EAAK,iBAAiB,SAAUY,CAAY,EAC5CT,EAAY,iBAAiB,QAASU,CAAe,EAErD,eAAeD,EAAaE,EAAG,CAO7B,GANAA,EAAE,eAAc,EAEhB5B,EAAce,EAAM,MAAM,OAC1BN,EAAQ,UAAY,GACpBR,EAAc,EAEV,CAACD,EAAa,CAChBqB,IACAI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,GAAI,CACFH,IACA,MAAMO,EAAO,MAAM9B,EAAYC,EAAaC,CAAW,EACvDiB,EAAU,KAAK,KAAKW,EAAK,UAAYV,CAAQ,EAC7CZ,EAAasB,EAAK,IAAI,CACvB,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAEDP,IACAC,IACAI,EAAE,OAAO,OACX,CAEA,eAAeD,GAAkB,CAC/B1B,GAAe,EACfqB,IACA,GAAI,CACF,MAAMO,EAAO,MAAM9B,EAAYC,EAAaC,CAAW,EACvDM,EAAasB,EAAK,IAAI,CACvB,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAED,SAAS,CACP,IAAK,IACL,SAAU,QACd,CAAG,EACDN,IACAD,GACF"}